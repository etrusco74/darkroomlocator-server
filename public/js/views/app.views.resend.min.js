app.views.resend=Backbone.View.extend({initialize:function(){console.log("initializing resend view")},events:{submit:"resend_password"},render:function(){$(this.el).html(this.template());this.$("#resendForm").validate({rules:{email:{required:true,email:true}},messages:this.language.form_messages});return this},resend_password:function(e){e.preventDefault();var t=this;bootbox.dialog({title:t.language.header_confirm_upd_message,message:t.language.body_confirm_upd_message,buttons:{confirm:{label:t.language.confirm_button,className:"btn btn-success",callback:function(){$("body").removeClass("modal-open");t.resend_confirm_password()}},cancel:{label:t.language.cancel_button,className:"btn btn-info"}}})},resend_confirm_password:function(){var e=this;var t={};t.id="1";t.email=e.$("#email").val();var n=new app.models.user;n.save(t,{success:function(t){if(t.changed.success){bootbox.dialog({title:e.language.header_success_upd_message,message:e.language.body_success_upd_message,buttons:{main:{label:e.language.label_button,className:"btn btn-info",callback:function(){$("body").removeClass("modal-open")}}}})}else{bootbox.dialog({title:e.language.error_message,message:e.language.error_message+" : "+t.changed.error,buttons:{main:{label:e.language.label_button,className:"btn btn-danger",callback:function(){$("body").removeClass("modal-open")}}}})}console.log(t);console.log(t.changed)},error:function(t){bootbox.dialog({title:e.language.error_message,message:e.language.error_message,buttons:{main:{label:e.language.label_button,className:"btn btn-danger",callback:function(){$("body").removeClass("modal-open")}}}});console.log(t)},url:app.const.apiurl()+"user/resetpwd/email/"+t.email,"private":false})},destroy_view:function(){this.undelegateEvents();$(this.el).removeData().unbind();this.remove();Backbone.View.prototype.remove.call(this);app.global.resendView=null}})