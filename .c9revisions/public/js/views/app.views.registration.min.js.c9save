{"ts":1380622455585,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"app.views.registration=Backbone.View.extend({initialize:function(){console.log(\"initializing registration view\")},events:{submit:\"registration\",\"click #btnRegistrationHome\":\"registration_home\"},registration_home:function(){app.routers.router.prototype.index()},render:function(){$(this.el).html(this.template());this.$(\"#registrationForm\").validate({rules:{first_name:\"required\",last_name:\"required\",username:{required:true,maxlength:12},password:{required:true,maxlength:12},repassword:{required:true,maxlength:12,equalTo:\"#password\"},email:{required:true,email:true},agree:\"required\"},messages:this.language.form_messages});return this},registration:function(e){e.preventDefault();var t=this;var n=this.registration_formToJson();var r=new app.models.user;r.save(n,{success:function(e){if(e.changed.success){t.$(\"#title\").text(t.language.header_registration_message);t.$(\"#body\").text(t.language.body_registration_message);t.$(\"#myModal\").modal(\"show\");t.$(\"#myModal\").on(\"hidden.bs.modal\",function(){app.routers.router.prototype.index()})}else{t.$(\"#title\").text(t.language.error_message);t.$(\"#body\").text(t.language.error_message+\" : \"+e.changed.error);t.$(\"#myModal\").modal(\"show\")}console.log(e);console.log(e.changed)},error:function(e){t.$(\"#title\").text(t.language.error_message);t.$(\"#body\").text(t.language.error_message);t.$(\"#myModal\").modal(\"show\");console.log(e)},url:app.const.apiurl()+\"user\",\"private\":false})},registration_formToJson:function(){var e={};e.first_name=this.$(\"#first_name\").val();e.last_name=this.$(\"#last_name\").val();e.username=this.$(\"#username\").val();e.password=this.$(\"#password\").val();e.email=this.$(\"#email\").val();return e},destroy_view:function(){this.undelegateEvents();$(this.el).removeData().unbind();this.remove();Backbone.View.prototype.remove.call(this);app.global.registrationView=null}})"]],"start1":0,"start2":0,"length1":0,"length2":1839}]],"length":1839}
